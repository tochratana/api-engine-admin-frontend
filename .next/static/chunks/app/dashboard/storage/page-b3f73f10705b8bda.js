(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{74424:function(e,t,s){Promise.resolve().then(s.bind(s,57176))},57176:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(57437),l=s(2265),r=s(81175),n=s(65537),i=s(17343),c=s(10346),d=s(1851),o=s(94508);function u(e){let{value:t,max:s,className:l,showLabel:r=!1,size:n="md",variant:i="default"}=e,c=Math.min(t/s*100,100);return(0,a.jsxs)("div",{className:(0,o.cn)("space-y-1",l),children:[r&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[t.toFixed(1)," GB"]}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[s.toFixed(1)," GB"]})]}),(0,a.jsx)("div",{className:(0,o.cn)("w-full bg-muted rounded-full overflow-hidden",{sm:"h-2",md:"h-3",lg:"h-4"}[n]),children:(0,a.jsx)("div",{className:(0,o.cn)("h-full transition-all duration-300 rounded-full","default"===i?c>=90?"bg-red-500":c>=75?"bg-yellow-500":"bg-accent":({default:"bg-accent",warning:"bg-yellow-500",danger:"bg-red-500"})[i]),style:{width:"".concat(c,"%")}})}),r&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-right",children:[c.toFixed(1),"% used"]})]})}var x=s(35974),m=s(66070),h=s(62869),p=s(65613),g=s(79205);let j=(0,g.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var f=s(92369);let y=(0,g.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),v=(0,g.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var b=s(82431),w=s(18930),N=s(84428),k=s(9334);let Z=(0,g.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var A=s(35153);function P(){let e=(0,r.T)(),{items:t,stats:s,isLoading:o,error:g,searchTerm:P,typeFilter:C,statusFilter:S,currentPage:T,totalPages:z,totalItems:F}=(0,r.C)(e=>e.storage),{toast:L}=(0,A.pm)();(0,l.useEffect)(()=>{e((0,n.D4)({page:T,search:P,type:C,status:S}))},[e,T,P,C,S]);let M=e=>{switch(e){case"project":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"user":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"system":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},U=e=>{switch(e){case"project":return j;case"user":return f.Z;case"system":return y;default:return v}},q=e=>{switch(e){case"active":return"default";case"archived":default:return"secondary";case"cleanup_pending":return"destructive"}},D=[{key:"name",label:"Name",render:(e,t)=>{let s=U(t.type);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(s,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.files.toLocaleString()," files"]})]})]})}},{key:"owner",label:"Owner",render:e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})},{key:"type",label:"Type",render:e=>(0,a.jsx)(x.C,{className:M(e),children:e.toUpperCase()})},{key:"size",label:"Usage",render:(e,t)=>(0,a.jsx)("div",{className:"w-32",children:(0,a.jsx)(u,{value:e,max:t.quota,showLabel:!0,size:"sm"})})},{key:"status",label:"Status",render:e=>(0,a.jsx)(x.C,{variant:q(e),children:e.replace("_"," ")})},{key:"lastAccessed",label:"Last Accessed",render:e=>(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(e).toLocaleDateString()})}],_=s.totalUsed/s.totalQuota*100;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Storage Management"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor and manage storage usage across all projects"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>{e((0,n.D4)({page:T,search:P,type:C,status:S}))},disabled:o,children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2 ".concat(o?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(h.z,{variant:"outline",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Cleanup"]})]})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsxs)(m.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Overall Storage Usage"})]})}),(0,a.jsx)(m.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u,{value:s.totalUsed,max:s.totalQuota,showLabel:!0,size:"lg"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Used"}),(0,a.jsxs)("p",{className:"font-semibold",children:[s.totalUsed.toFixed(1)," GB"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Available"}),(0,a.jsxs)("p",{className:"font-semibold",children:[(s.totalQuota-s.totalUsed).toFixed(1)," GB"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Total Files"}),(0,a.jsx)("p",{className:"font-semibold",children:s.totalFiles.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Usage"}),(0,a.jsxs)("p",{className:"font-semibold",children:[_.toFixed(1),"%"]})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(m.Zb,{children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ll,{className:"text-sm font-medium",children:"Total Storage"}),(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[s.totalUsed.toFixed(1)," GB"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",s.totalQuota.toFixed(1)," GB quota"]})]})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ll,{className:"text-sm font-medium",children:"Active Projects"}),(0,a.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.activeProjects}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently using storage"})]})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ll,{className:"text-sm font-medium",children:"Archived Items"}),(0,a.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.archivedProjects}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready for cleanup"})]})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ll,{className:"text-sm font-medium",children:"Cleanup Pending"}),(0,a.jsx)(Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.cleanupPending}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),g&&(0,a.jsx)(p.bZ,{variant:"destructive",children:(0,a.jsx)(p.X,{children:g})}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m.ll,{children:"Storage Items"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.z,{placeholder:"Filter by type",value:C,onValueChange:t=>{e((0,n.jk)(t))},options:[{value:"all",label:"All Types"},{value:"project",label:"Projects"},{value:"user",label:"Users"},{value:"system",label:"System"}]}),(0,a.jsx)(d.z,{placeholder:"Filter by status",value:S,onValueChange:t=>{e((0,n.bI)(t))},options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"archived",label:"Archived"},{value:"cleanup_pending",label:"Cleanup Pending"}]})]})]})}),(0,a.jsxs)(m.aY,{children:[(0,a.jsx)(i.w,{data:t,columns:D,searchPlaceholder:"Search storage items...",onSearch:t=>{e((0,n.Cl)(t))},onView:e=>{L({title:"Storage Details",description:"Viewing storage details for ".concat(e.name)})},onEdit:e=>{L({title:"Cleanup Storage",description:"Initiating cleanup for ".concat(e.name)})},onDelete:e=>{L({title:"Archive Storage",description:"Archiving ".concat(e.name)})},isLoading:o}),z>1&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(c.t,{currentPage:T,totalPages:z,onPageChange:t=>{e((0,n.Sl)(t))}})})]})]})]})}},1851:function(e,t,s){"use strict";s.d(t,{z:function(){return r}});var a=s(57437),l=s(53647);function r(e){let{placeholder:t,value:s,onValueChange:r,options:n}=e;return(0,a.jsxs)(l.Ph,{value:s,onValueChange:r,children:[(0,a.jsx)(l.i4,{className:"w-[180px]",children:(0,a.jsx)(l.ki,{placeholder:t})}),(0,a.jsx)(l.Bw,{children:n.map(e=>(0,a.jsx)(l.Ql,{value:e.value,children:e.label},e.value))})]})}},65537:function(e,t,s){"use strict";s.d(t,{Cl:function(){return i},D4:function(){return r},Sl:function(){return o},bI:function(){return d},jk:function(){return c}});var a=s(39129);let l=[{id:"1",name:"E-commerce Platform",type:"project",owner:{id:"1",name:"John Doe",email:"john@example.com"},size:2.5,quota:5,files:1247,lastAccessed:"2024-01-20T14:30:00Z",createdAt:"2024-01-15T10:00:00Z",status:"active"},{id:"2",name:"Mobile Banking App",type:"project",owner:{id:"2",name:"Sarah Smith",email:"sarah@example.com"},size:1.8,quota:3,files:892,lastAccessed:"2024-01-19T16:45:00Z",createdAt:"2024-01-10T09:00:00Z",status:"active"},{id:"3",name:"Analytics API",type:"project",owner:{id:"3",name:"Mike Johnson",email:"mike@example.com"},size:.9,quota:2,files:456,lastAccessed:"2024-01-18T13:15:00Z",createdAt:"2024-01-05T11:30:00Z",status:"active"},{id:"4",name:"User Database",type:"project",owner:{id:"4",name:"Emily Davis",email:"emily@example.com"},size:5.2,quota:10,files:2341,lastAccessed:"2024-01-17T10:20:00Z",createdAt:"2024-01-01T08:00:00Z",status:"archived"},{id:"5",name:"Legacy System Backup",type:"system",owner:{id:"5",name:"System Admin",email:"admin@example.com"},size:12.7,quota:15,files:5678,lastAccessed:"2024-01-15T08:00:00Z",createdAt:"2023-12-01T00:00:00Z",status:"cleanup_pending"},{id:"6",name:"User Assets - Alex Wilson",type:"user",owner:{id:"6",name:"Alex Wilson",email:"alex@example.com"},size:.3,quota:1,files:89,lastAccessed:"2024-01-20T12:00:00Z",createdAt:"2024-01-16T14:25:00Z",status:"active"}],r=(0,a.hg)("storage/fetchStorageData",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:t}=arguments.length>1?arguments[1]:void 0;try{await new Promise(e=>setTimeout(e,700));let t=[...l];e.search&&(t=t.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase())||t.owner.name.toLowerCase().includes(e.search.toLowerCase())||t.owner.email.toLowerCase().includes(e.search.toLowerCase()))),e.type&&"all"!==e.type&&(t=t.filter(t=>t.type===e.type)),e.status&&"all"!==e.status&&(t=t.filter(t=>t.status===e.status)),t.sort((e,t)=>t.size-e.size);let s={totalUsed:l.reduce((e,t)=>e+t.size,0),totalQuota:l.reduce((e,t)=>e+t.quota,0),totalFiles:l.reduce((e,t)=>e+t.files,0),activeProjects:l.filter(e=>"active"===e.status).length,archivedProjects:l.filter(e=>"archived"===e.status).length,cleanupPending:l.filter(e=>"cleanup_pending"===e.status).length},a=((e.page||1)-1)*10;return{items:t.slice(a,a+10),stats:s,total:t.length,totalPages:Math.ceil(t.length/10)}}catch(e){return t("Failed to fetch storage data")}}),n=(0,a.oM)({name:"storage",initialState:{items:[],stats:{totalUsed:0,totalQuota:0,totalFiles:0,activeProjects:0,archivedProjects:0,cleanupPending:0},isLoading:!1,error:null,searchTerm:"",typeFilter:"all",statusFilter:"all",currentPage:1,totalPages:1,totalItems:0},reducers:{setSearchTerm:(e,t)=>{e.searchTerm=t.payload,e.currentPage=1},setTypeFilter:(e,t)=>{e.typeFilter=t.payload,e.currentPage=1},setStatusFilter:(e,t)=>{e.statusFilter=t.payload,e.currentPage=1},setCurrentPage:(e,t)=>{e.currentPage=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(r.pending,e=>{e.isLoading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{e.isLoading=!1,e.items=t.payload.items,e.stats=t.payload.stats,e.totalItems=t.payload.total,e.totalPages=t.payload.totalPages}).addCase(r.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{setSearchTerm:i,setTypeFilter:c,setStatusFilter:d,setCurrentPage:o,clearError:u}=n.actions;t.ZP=n.reducer},81175:function(e,t,s){"use strict";s.d(t,{C:function(){return r},T:function(){return l}});var a=s(68575);let l=a.I0.withTypes(),r=a.v9.withTypes()},9334:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},84428:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[516,203,847,614,971,117,744],function(){return e(e.s=74424)}),_N_E=e.O()}]);