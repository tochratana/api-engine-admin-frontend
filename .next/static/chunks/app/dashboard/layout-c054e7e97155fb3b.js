(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{33951:function(e,r,n){Promise.resolve().then(n.bind(n,28033)),Promise.resolve().then(n.bind(n,12427)),Promise.resolve().then(n.bind(n,4755))},28033:function(e,r,n){"use strict";n.d(r,{default:function(){return d}});var t=n(57437),s=n(2265),a=n(99376),o=n(81175),i=n(97122),l=n(51817);function d(e){let{children:r}=e,{token:n,user:d}=(0,o.C)(e=>e.auth),c=(0,a.useRouter)(),u=(0,o.T)(),[h,g]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{console.log("[v0] AuthGuard: Checking authentication state");let e=localStorage.getItem("token"),r=localStorage.getItem("user");if(console.log("[v0] AuthGuard: Redux token:",!!n),console.log("[v0] AuthGuard: Stored token:",!!e),n||e){if(e&&r&&!d)try{let n=JSON.parse(r);u((0,i.oc)({token:e,user:n})),console.log("[v0] AuthGuard: Loaded user from localStorage:",n)}catch(e){console.log("[v0] AuthGuard: Error parsing stored user:",e)}console.log("[v0] AuthGuard: Token found, allowing access"),g(!1)}else console.log("[v0] AuthGuard: No token found, redirecting to login"),c.push("/")},[n,d,c,u]),!h||n||localStorage.getItem("token"))?(0,t.jsx)(t.Fragment,{children:r}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-primary"})})}},12427:function(e,r,n){"use strict";n.d(r,{default:function(){return u}});var t=n(57437),s=n(2265),a=n(62869),o=n(97226),i=n(85929),l=n(94766),d=n(25922),c=n(81175);function u(){let{setTheme:e,theme:r}=(0,d.F)(),{user:n}=(0,c.C)(e=>e.auth),[u,h]=s.useState(!1);s.useEffect(()=>{h(!0)},[]);let g=(null==n?void 0:n.name)||(null==n?void 0:n.firstName)&&(null==n?void 0:n.lastName)?"".concat(n.firstName," ").concat(n.lastName):(null==n?void 0:n.username)||"Admin",m=(null==n?void 0:n.email)||"admin@example.com",f=g.charAt(0).toUpperCase();return console.log("This is a data for user ",n),console.log("Email for admin ",null==n?void 0:n.email),(0,t.jsx)("header",{className:"bg-card border-b border-border px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)("h1",{className:"text-xl font-semibold text-card-foreground lg:hidden",children:"Dashboard"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(a.z,{variant:"ghost",size:"icon","aria-label":u?"Toggle theme (current: ".concat(r,")"):"Toggle theme",onClick:()=>{u&&e("dark"===r?"light":"dark")},children:u&&"dark"===r?(0,t.jsx)(o.Z,{className:"h-5 w-5"}):(0,t.jsx)(i.Z,{className:"h-5 w-5"})}),(0,t.jsxs)(a.z,{variant:"ghost",size:"icon",children:[(0,t.jsx)(l.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Notifications"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-accent rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-accent-foreground",children:f})}),(0,t.jsxs)("div",{className:"hidden md:block",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-card-foreground",children:null==n?void 0:n.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:m})]})]})]})]})})}},4755:function(e,r,n){"use strict";n.d(r,{default:function(){return j}});var t=n(57437),s=n(2265),a=n(27648),o=n(99376),i=n(94508),l=n(62869),d=n(25466),c=n(95805),u=n(56475),h=n(86595),g=n(84428),m=n(98728),f=n(32489),v=n(58293),x=n(47692),b=n(81175),p=n(97122);let k=[{name:"Dashboard",href:"/dashboard",icon:d.Z},{name:"Users",href:"/dashboard/users",icon:c.Z},{name:"Projects",href:"/dashboard/projects",icon:u.Z},{name:"Ratings",href:"/dashboard/ratings",icon:h.Z},{name:"Storage",href:"/dashboard/storage",icon:g.Z},{name:"Settings",href:"/dashboard/settings",icon:m.Z}];function j(){let[e,r]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),c=(0,o.usePathname)(),u=(0,b.T)(),h=(0,o.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"lg:hidden fixed top-4 left-4 z-50",onClick:()=>d(!n),children:n?(0,t.jsx)(f.Z,{className:"h-6 w-6"}):(0,t.jsx)(v.Z,{className:"h-6 w-6"})}),n&&(0,t.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>d(!1)}),(0,t.jsxs)("aside",{className:(0,i.cn)("bg-sidebar border-r border-sidebar-border flex flex-col transition-all duration-300 z-50","fixed lg:relative inset-y-0 left-0",e?"w-16":"w-64",n?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,t.jsx)("div",{className:"p-6 border-b border-sidebar-border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[!e&&(0,t.jsx)("h2",{className:"text-lg font-semibold text-sidebar-foreground",children:"Admin Panel"}),(0,t.jsx)(l.z,{variant:"ghost",size:"icon",className:"hidden lg:flex",onClick:()=>r(!e),children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:k.map(r=>{let n=c===r.href;return(0,t.jsxs)(a.default,{href:r.href,className:(0,i.cn)("flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",n?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-primary hover:text-sidebar-primary-foreground",e&&"justify-center"),onClick:()=>d(!1),children:[(0,t.jsx)(r.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&(0,t.jsx)("span",{children:r.name})]},r.name)})}),(0,t.jsx)("div",{className:"p-4 border-t border-sidebar-border",children:(0,t.jsxs)(l.z,{variant:"ghost",className:(0,i.cn)("w-full justify-start text-sidebar-foreground hover:bg-destructive hover:text-destructive-foreground",e&&"justify-center"),onClick:()=>{u((0,p.kS)()),h.push("/")},children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 flex-shrink-0"}),!e&&(0,t.jsx)("span",{className:"ml-3",children:"Logout"})]})})]})]})}},62869:function(e,r,n){"use strict";n.d(r,{z:function(){return l}});var t=n(57437);n(2265);var s=n(37053),a=n(90535),o=n(94508);let i=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:n,size:a,asChild:l=!1,...d}=e,c=l?s.g7:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:n,size:a,className:r})),...d})}},97122:function(e,r,n){"use strict";n.d(r,{fw:function(){return i},kS:function(){return o},oc:function(){return l},pH:function(){return s}});var t=n(39129);let s=(0,t.hg)("auth/loginUser",async(e,r)=>{let{rejectWithValue:n}=r;try{var t,s,a,o,i,l,d,c,u,h,g,m;console.log("[v0] Making API call to login endpoint");let r=await fetch("https://api.api-ngin.oudom.dev/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("[v0] API response status:",r.status),!r.ok){let e=await r.json();return console.log("[v0] API error response:",e),n(e.message||"Login failed")}let f=await r.json();console.log("[v0] API success response:",f);let v=null!==(m=null!==(g=null!==(h=null!==(u=null!==(c=null!==(d=null==f?void 0:f.token)&&void 0!==d?d:null==f?void 0:f.accessToken)&&void 0!==c?c:null==f?void 0:f.access_token)&&void 0!==u?u:null==f?void 0:f.jwt)&&void 0!==h?h:null==f?void 0:f.idToken)&&void 0!==g?g:null==f?void 0:f.id_token)&&void 0!==m?m:(null==f?void 0:f.data)&&(f.data.token||f.data.accessToken||f.data.access_token);if(console.log("[v0] Detected login token:",v?"".concat(String(v).substring(0,20),"..."):"(none)"),!v)return console.log("[v0] Login response did not include a token; rejecting login"),n("Authentication token missing from server response");let x={id:(null===(t=f.user)||void 0===t?void 0:t.id)||f.userId||"unknown",email:e.usernameOrEmail,name:(null===(s=f.user)||void 0===s?void 0:s.name)||(null===(a=f.user)||void 0===a?void 0:a.displayName)||e.usernameOrEmail.split("@")[0],username:null===(o=f.user)||void 0===o?void 0:o.username,firstName:null===(i=f.user)||void 0===i?void 0:i.firstName,lastName:null===(l=f.user)||void 0===l?void 0:l.lastName};return{token:v,...f,user:x}}catch(e){return console.log("[v0] Network error:",e),n("Network error occurred")}}),a=(0,t.oM)({name:"auth",initialState:{user:null,token:null,isLoading:!1,error:null},reducers:{logout:e=>{e.user=null,e.token=null,e.error=null,localStorage.removeItem("token")},clearError:e=>{e.error=null},setUserFromStorage:(e,r)=>{e.user=r.payload.user,e.token=r.payload.token}},extraReducers:e=>{e.addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload.user,e.token=r.payload.token,localStorage.setItem("token",r.payload.token),localStorage.setItem("user",JSON.stringify(r.payload.user))}).addCase(s.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),{logout:o,clearError:i,setUserFromStorage:l}=a.actions;r.ZP=a.reducer},81175:function(e,r,n){"use strict";n.d(r,{C:function(){return a},T:function(){return s}});var t=n(68575);let s=t.I0.withTypes(),a=t.v9.withTypes()},94508:function(e,r,n){"use strict";n.d(r,{cn:function(){return a}});var t=n(61994),s=n(53335);function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,s.m6)((0,t.W)(r))}}},function(e){e.O(0,[516,203,646,971,117,744],function(){return e(e.s=33951)}),_N_E=e.O()}]);