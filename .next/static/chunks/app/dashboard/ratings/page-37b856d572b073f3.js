(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{45355:function(e,t,a){Promise.resolve().then(a.bind(a,3016))},3016:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var s=a(57437),n=a(2265),r=a(98272),l=a(17343),i=a(10346),c=a(1851),o=a(86595),d=a(94508);function u(e){let{rating:t,maxRating:a=5,size:n="md",showNumber:r=!1,className:l}=e,i={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"};return(0,s.jsxs)("div",{className:(0,d.cn)("flex items-center space-x-1",l),children:[(0,s.jsx)("div",{className:"flex",children:[...Array(a)].map((e,a)=>(0,s.jsx)(o.Z,{className:(0,d.cn)(i[n],a<t?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200 dark:fill-gray-700 dark:text-gray-700")},a))}),r&&(0,s.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:[t,"/",a]})]})}var m=a(35974),x=a(66070),g=a(62869),p=a(65613),h=a(26110),v=a(95186),j=a(26815),f=a(31810),b=a(37157),N=a(53417),w=a(41671),y=a(99388),R=a(91723),S=a(42208),P=a(51817),C=a(18930),A=a(92369),k=a(82431),Z=a(35153);function z(){var e,t,a,d,z,D,_;let{toast:F}=(0,Z.pm)(),[O,T]=(0,n.useState)({page:1,search:"",rating:"all",sentiment:"all",status:"all",starFilter:null}),[U,q]=(0,n.useState)({open:!1,rating:null}),[E,L]=(0,n.useState)({open:!1,rating:null}),[B,V]=(0,n.useState)({open:!1,username:""}),[I,K]=(0,n.useState)(""),Y=null!==O.starFilter,{data:H,isLoading:$,error:M,refetch:G}=(0,r.xG)({page:O.page,search:O.search,rating:O.rating,sentiment:O.sentiment,status:O.status,size:10},{skip:Y}),{data:Q,isLoading:W,error:X,refetch:J}=(0,r.hU)({star:O.starFilter,page:O.page,size:10},{skip:!Y}),ee=Y?Q:H,et=Y?W:$,ea=Y?X:M,[es,{data:en,isLoading:er}]=(0,r.K0)(),[el,{isLoading:ei}]=(0,r.nP)(),ec=(null==ee?void 0:ee.ratings)||[],eo=(null==ee?void 0:ee.totalPages)||1,ed=(null==ee?void 0:ee.totalRatings)||0,eu=(null==ee?void 0:ee.currentPage)||1,em=()=>{Y?J():G()},ex=e=>{L({open:!0,rating:e})},eg=e=>{q({open:!0,rating:e})},ep=async()=>{if(U.rating)try{await el(U.rating.id).unwrap(),F({title:"Success",description:"Review deleted successfully"}),q({open:!1,rating:null}),em()}catch(e){F({title:"Error",description:"Failed to delete review",variant:"destructive"})}},eh=async()=>{if(I.trim())try{let e=await es(I.trim()).unwrap();Array.isArray(e)?(V({open:!0,username:I.trim()}),K("")):F({title:"Warning",description:"Received unexpected data format from server",variant:"destructive"})}catch(t){var e;console.error("Error fetching user reviews:",t),F({title:"Error",description:(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch user reviews",variant:"destructive"})}else F({title:"Warning",description:"Please enter a username",variant:"destructive"})},ev=e=>{switch(e){case"positive":return"default";case"neutral":default:return"secondary";case"negative":return"destructive"}},ej=e=>{switch(e){case"positive":return f.Z;case"negative":return b.Z;default:return N.Z}},ef=e=>{switch(e){case"approved":return"default";case"pending":default:return"secondary";case"rejected":return"destructive"}},eb=e=>{switch(e){case"approved":return w.Z;case"rejected":return y.Z;default:return R.Z}},eN=[{key:"user",label:"User",render:(e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null==e?void 0:e.name)||t.username}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(null==e?void 0:e.email)||"".concat(t.username,"@example.com")})]})},{key:"project",label:"Project",render:e=>(0,s.jsx)("span",{className:"font-medium",children:(null==e?void 0:e.name)||"Default Project"})},{key:"rating",label:"Rating",render:(e,t)=>{let a=e||t.star;return(0,s.jsx)(u,{rating:a,showNumber:!0})}},{key:"comment",label:"Comment",render:(e,t)=>{let a=e||t.content;return(0,s.jsx)("div",{className:"max-w-[300px]",children:(0,s.jsx)("p",{className:"text-sm truncate",title:a,children:a})})}},{key:"sentiment",label:"Sentiment",render:e=>{let t=ej(e);return(0,s.jsxs)(m.C,{variant:ev(e),className:"flex items-center space-x-1",children:[(0,s.jsx)(t,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e})]})}},{key:"status",label:"Status",render:e=>{let t=eb(e);return(0,s.jsxs)(m.C,{variant:ef(e),className:"flex items-center space-x-1",children:[(0,s.jsx)(t,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e})]})}},{key:"createdAt",label:"Date",render:e=>(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e?new Date(e).toLocaleDateString():"Recently"})},{key:"actions",label:"Actions",render:(e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>ex(t),children:(0,s.jsx)(S.Z,{className:"h-3 w-3"})}),(0,s.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>eg(t),disabled:ei,children:ei?(0,s.jsx)(P.Z,{className:"h-3 w-3 animate-spin"}):(0,s.jsx)(C.Z,{className:"h-3 w-3"})})]})}],ew=ec.length>0?ec.reduce((e,t)=>e+(t.rating||t.star),0)/ec.length:0,ey=ec.filter(e=>"pending"===e.status).length,eR=ec.filter(e=>"positive"===e.sentiment).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Rating Management"}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["Monitor and manage user feedback and ratings",O.starFilter&&(0,s.jsxs)("span",{className:"ml-2 text-sm bg-primary/10 text-primary px-2 py-1 rounded",children:["Filtered by ",O.starFilter," stars"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v.I,{placeholder:"Enter username",value:I,onChange:e=>K(e.target.value),className:"w-40"}),(0,s.jsxs)(g.z,{variant:"outline",onClick:eh,disabled:er,children:[er?(0,s.jsx)(P.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"User Reviews"]})]}),(0,s.jsxs)(g.z,{variant:"outline",onClick:em,disabled:et,children:[(0,s.jsx)(k.Z,{className:"h-4 w-4 mr-2 ".concat(et?"animate-spin":"")}),"Refresh"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(x.ll,{className:"text-sm font-medium",children:"Total Ratings"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(x.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:ed}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time reviews"})]})]}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(x.ll,{className:"text-sm font-medium",children:"Average Rating"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(x.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:ew.toFixed(1)}),(0,s.jsx)(u,{rating:Math.round(ew),size:"sm"})]})]}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(x.ll,{className:"text-sm font-medium",children:"Pending Reviews"}),(0,s.jsx)(R.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(x.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:ey}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting moderation"})]})]}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(x.ll,{className:"text-sm font-medium",children:"Positive Feedback"}),(0,s.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(x.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:eR}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Happy customers"})]})]})]}),ea&&(0,s.jsx)(p.bZ,{variant:"destructive",children:(0,s.jsx)(p.X,{children:"object"==typeof ea&&"message"in ea?ea.message:"An error occurred while loading ratings"})}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(x.ll,{children:"All Ratings"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.z,{placeholder:"Filter by star",value:(null===(e=O.starFilter)||void 0===e?void 0:e.toString())||"all",onValueChange:e=>{"all"===e?T(e=>({...e,starFilter:null,page:1,rating:"all"})):T(t=>({...t,starFilter:parseInt(e),page:1,rating:"all"}))},options:[{value:"all",label:"All Stars"},{value:"5",label:"5 Stars Only"},{value:"4",label:"4 Stars Only"},{value:"3",label:"3 Stars Only"},{value:"2",label:"2 Stars Only"},{value:"1",label:"1 Star Only"}]}),(0,s.jsx)(c.z,{placeholder:"Filter by rating",value:O.rating,onValueChange:e=>{T(t=>({...t,rating:e,page:1,starFilter:null}))},options:[{value:"all",label:"All Ratings"},{value:"5",label:"5 Stars"},{value:"4",label:"4 Stars"},{value:"3",label:"3 Stars"},{value:"2",label:"2 Stars"},{value:"1",label:"1 Star"}],disabled:null!==O.starFilter}),(0,s.jsx)(c.z,{placeholder:"Filter by sentiment",value:O.sentiment,onValueChange:e=>{T(t=>({...t,sentiment:e,page:1}))},options:[{value:"all",label:"All Sentiments"},{value:"positive",label:"Positive"},{value:"neutral",label:"Neutral"},{value:"negative",label:"Negative"}]}),(0,s.jsx)(c.z,{placeholder:"Filter by status",value:O.status,onValueChange:e=>{T(t=>({...t,status:e,page:1}))},options:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]})]})]})}),(0,s.jsxs)(x.aY,{children:[(0,s.jsx)(l.w,{data:ec,columns:eN,searchPlaceholder:"Search ratings...",onSearch:e=>{T(t=>({...t,search:e,page:1}))},onView:ex,onEdit:e=>{F({title:"Respond to Rating",description:"Responding to ".concat(e.user.name,"'s feedback")})},onDelete:eg,isLoading:et}),eo>1&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(i.t,{currentPage:eu,totalPages:eo,onPageChange:e=>{T(t=>({...t,page:e}))}})})]})]}),(0,s.jsx)(h.Vq,{open:U.open,onOpenChange:e=>q({open:e,rating:null}),children:(0,s.jsxs)(h.cZ,{children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{children:"Delete Review"}),(0,s.jsxs)(h.Be,{children:["Are you sure you want to delete this review from"," ",(null===(a=U.rating)||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.name)||(null===(d=U.rating)||void 0===d?void 0:d.username),"? This action cannot be undone."]})]}),(0,s.jsxs)(h.cN,{children:[(0,s.jsx)(g.z,{variant:"outline",onClick:()=>q({open:!1,rating:null}),children:"Cancel"}),(0,s.jsxs)(g.z,{variant:"destructive",onClick:ep,disabled:ei,children:[ei?(0,s.jsx)(P.Z,{className:"h-4 w-4 animate-spin mr-2"}):null,"Delete Review"]})]})]})}),(0,s.jsx)(h.Vq,{open:E.open,onOpenChange:e=>L({open:e,rating:null}),children:(0,s.jsxs)(h.cZ,{className:"max-w-2xl",children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{children:"Review Details"}),(0,s.jsx)(h.Be,{children:"Detailed information about this review"})]}),E.rating&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"User"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:(null===(z=E.rating.user)||void 0===z?void 0:z.name)||E.rating.username}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(null===(D=E.rating.user)||void 0===D?void 0:D.email)||"".concat(E.rating.username,"@example.com")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"Project"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:(null===(_=E.rating.project)||void 0===_?void 0:_.name)||"Default Project"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"Rating"}),(0,s.jsx)(u,{rating:E.rating.rating||E.rating.star,showNumber:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"Status"}),(0,s.jsx)(m.C,{variant:ef(E.rating.status),children:E.rating.status})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"Comment"}),(0,s.jsx)("p",{className:"text-sm mt-1 p-3 bg-muted rounded-md",children:E.rating.comment||E.rating.content})]}),E.rating.adminResponse&&(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{children:"Admin Response"}),(0,s.jsx)("p",{className:"text-sm mt-1 p-3 bg-primary/10 rounded-md",children:E.rating.adminResponse})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created:"," ",E.rating.createdAt?new Date(E.rating.createdAt).toLocaleString():"Recently",E.rating.respondedAt&&(0,s.jsxs)("span",{className:"ml-4",children:["Responded:"," ",new Date(E.rating.respondedAt).toLocaleString()]})]})]}),(0,s.jsx)(h.cN,{children:(0,s.jsx)(g.z,{variant:"outline",onClick:()=>L({open:!1,rating:null}),children:"Close"})})]})}),(0,s.jsx)(h.Vq,{open:B.open,onOpenChange:e=>V({open:e,username:""}),children:(0,s.jsxs)(h.cZ,{className:"max-w-4xl",children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsxs)(h.$N,{children:["Reviews by ",B.username]}),(0,s.jsx)(h.Be,{children:"All reviews submitted by this user"})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:en&&en.length>0?(0,s.jsx)("div",{className:"space-y-4",children:en.map(e=>{var t;return(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u,{rating:e.rating||e.star,showNumber:!0}),(0,s.jsx)(m.C,{variant:ev(e.sentiment),children:e.sentiment}),(0,s.jsx)(m.C,{variant:ef(e.status),children:e.status})]}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Recently"})]}),(0,s.jsxs)("p",{className:"text-sm font-medium mb-1",children:["Project: ",(null===(t=e.project)||void 0===t?void 0:t.name)||"Default Project"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.comment||e.content})]},e.id)})}):(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No reviews found for this user."})}),(0,s.jsx)(h.cN,{children:(0,s.jsx)(g.z,{variant:"outline",onClick:()=>V({open:!1,username:""}),children:"Close"})})]})})]})}},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return x},Be:function(){return g},Vq:function(){return i},cN:function(){return m},cZ:function(){return d},fK:function(){return u}});var s=a(57437);a(2265);var n=a(49027),r=a(32489),l=a(94508);function i(e){let{...t}=e;return(0,s.jsx)(n.fC,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,s.jsx)(n.h_,{"data-slot":"dialog-portal",...t})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(n.aV,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function d(e){let{className:t,children:a,showCloseButton:i=!0,...d}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(o,{}),(0,s.jsxs)(n.VY,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...d,children:[a,i&&(0,s.jsxs)(n.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(n.Dx,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(n.dk,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}},1851:function(e,t,a){"use strict";a.d(t,{z:function(){return r}});var s=a(57437),n=a(53647);function r(e){let{placeholder:t,value:a,onValueChange:r,options:l}=e;return(0,s.jsxs)(n.Ph,{value:a,onValueChange:r,children:[(0,s.jsx)(n.i4,{className:"w-[180px]",children:(0,s.jsx)(n.ki,{placeholder:t})}),(0,s.jsx)(n.Bw,{children:l.map(e=>(0,s.jsx)(n.Ql,{value:e.value,children:e.label},e.value))})]})}},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var s=a(57437);a(2265);var n=a(6394),r=a(94508);function l(e){let{className:t,...a}=e;return(0,s.jsx)(n.f,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},98272:function(e,t,a){"use strict";a.d(t,{K0:function(){return m},c5:function(){return l},hU:function(){return c},nP:function(){return p},xG:function(){return i}});var s=a(23557),n=a(79523);let r=a(40257).env.NEXT_PUBLIC_API_BASE_URL||"https://api.api-ngin.oudom.dev/api",l=(0,s.LC)({reducerPath:"ratingsApi",baseQuery:(0,n.ni)({baseUrl:r,prepareHeaders:e=>{let t=localStorage.getItem("token");return e.set("content-type","application/json"),t&&e.set("authorization","Bearer ".concat(t)),e}}),tagTypes:["Rating","UserReviews"],endpoints:e=>({fetchRatings:e.query({query:e=>{let{page:t=1,search:a,rating:s,sentiment:n,status:r,size:l=10}=e,i=new URLSearchParams({page:(t-1).toString(),size:l.toString(),sortBy:"id",sortDir:"desc"});return a&&""!==a&&i.append("search",a),s&&"all"!==s&&i.append("rating",s),n&&"all"!==n&&i.append("sentiment",n),r&&"all"!==r&&i.append("status",r),"/reviews?".concat(i.toString())},transformResponse:e=>({ratings:e.content.map(e=>({...e,rating:e.star,comment:e.content,user:e.user||{id:e.id.toString(),name:e.username,email:"".concat(e.username,"@example.com")},project:e.project||{id:"1",name:"Default Project"},sentiment:e.sentiment||"neutral",status:e.status||"approved",createdAt:e.createdAt||new Date().toISOString()})),totalPages:e.totalPages,totalRatings:e.totalElements,currentPage:e.number+1}),providesTags:["Rating"]}),fetchReviewsByStar:e.query({query:e=>{let{star:t,page:a=1,size:s=10}=e,n=new URLSearchParams({page:(a-1).toString(),size:s.toString(),sortBy:"id",sortDir:"desc"});return"/reviews/star/".concat(t,"?").concat(n.toString())},transformResponse:e=>({ratings:e.content.map(e=>({...e,rating:e.star,comment:e.content,user:e.user||{id:e.id.toString(),name:e.username,email:"".concat(e.username,"@example.com")},project:e.project||{id:"1",name:"Default Project"},sentiment:e.sentiment||"neutral",status:e.status||"approved",createdAt:e.createdAt||new Date().toISOString()})),totalPages:e.totalPages,totalRatings:e.totalElements,currentPage:e.number+1}),providesTags:["Rating"]}),fetchRatingsByProject:e.query({query:e=>"/reviews/project/".concat(e),providesTags:["Rating"]}),fetchReviewsByUsername:e.query({query:e=>"/reviews/user/".concat(encodeURIComponent(e)),transformResponse:e=>{let t=[];return Array.isArray(e)?t=e:e&&"object"==typeof e&&"content"in e?t=e.content||[]:(console.warn("Unexpected response format for fetchReviewsByUsername:",e),t=[]),t.map(e=>({...e,rating:e.star,comment:e.content,user:e.user||{id:e.id.toString(),name:e.username,email:"".concat(e.username,"@example.com")},project:e.project||{id:"1",name:"Default Project"},sentiment:e.sentiment||"neutral",status:e.status||"approved",createdAt:e.createdAt||new Date().toISOString()}))},providesTags:["UserReviews"]}),createRating:e.mutation({query:e=>({url:"/reviews",method:"POST",body:{...e,star:e.rating,content:e.comment}}),invalidatesTags:["Rating"]}),updateRating:e.mutation({query:e=>{let{id:t,data:a}=e;return{url:"/reviews/".concat(t),method:"PUT",body:{...a,star:a.rating,content:a.comment}}},invalidatesTags:["Rating"]}),deleteRating:e.mutation({query:e=>({url:"/reviews/".concat(e),method:"DELETE"}),invalidatesTags:["Rating","UserReviews"]}),approveRating:e.mutation({query:e=>({url:"/reviews/".concat(e,"/approve"),method:"PATCH"}),invalidatesTags:["Rating"]}),rejectRating:e.mutation({query:e=>({url:"/reviews/".concat(e,"/reject"),method:"PATCH"}),invalidatesTags:["Rating"]})})}),{useFetchRatingsQuery:i,useFetchReviewsByStarQuery:c,useLazyFetchReviewsByStarQuery:o,useFetchRatingsByProjectQuery:d,useFetchReviewsByUsernameQuery:u,useLazyFetchReviewsByUsernameQuery:m,useCreateRatingMutation:x,useUpdateRatingMutation:g,useDeleteRatingMutation:p,useApproveRatingMutation:h,useRejectRatingMutation:v}=l}},function(e){e.O(0,[516,203,557,847,454,614,971,117,744],function(){return e(e.s=45355)}),_N_E=e.O()}]);